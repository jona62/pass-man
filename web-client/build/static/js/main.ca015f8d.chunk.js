(this["webpackJsonppassman-web-client"]=this["webpackJsonppassman-web-client"]||[]).push([[0],{18:function(e,t,a){},23:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),l=a.n(r),s=(a(28),a(29),a(5)),i=a(6),c=a(12),m=a(8),u=a(9),d=a(10),h=a(11),f=(a(18),a(30),function(e){var t="form-control";return e.touched&&!e.valid&&(t="control-error"),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",Object.assign({className:t},e)))}),v=function(e,t){return e.length>=t},p=function(e){return""!==e.trim()},g=function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(String(e).toLowerCase())},C=function(e){return e.length>=8&&e.length<=32},w=function(e,t){var a=!0;for(var n in t)switch(n){case"minLength":a=a&&v(e,t[n]);break;case"isRequired":a=a&&p(e);break;case"isEmail":a=a&&g(e);break;case"isPassword":a=a&&C(e);break;default:a=!0}return a},E={isAuthenticated:!1,emailAddress:"",authenticate:function(e,t){var a=this;return fetch("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();console.log("Login Failed")})).then((function(t){return a.isAuthenticated=!0,a.emailAddress=e,t}))},signup:function(e){var t=this;return fetch("/api/auth/signup",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();console.log("Registration Failed")})).then((function(a){return t.emailAddress=e.email,t.isAuthenticated=!0,a}))},signout:function(e){var t=this;return fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Logout Failed");return e.json()})).then((function(e){return t.isAuthenticated=!1,e}))}},b=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).changeHandler=function(t){var a=t.target.name,n=t.target.value,o=Object(c.a)({},e.state.formControls),r=Object(c.a)({},o[a]);r.value=n,r.touched=!0,r.valid=w(n,r.validationRules),o[a]=r;var l=!0;for(var s in o)l=o[s].valid&&l;e.setState({formControls:o,formIsValid:l})},e.formSubmitHandler=function(t){t.preventDefault();var a={};for(var n in e.state.formControls)a[n]=e.state.formControls[n].value;var o=a.email,r=a.password;E.authenticate(o,r).then((function(t){e.setState({isAuthenticated:!0})}))},e.state={isAuthenticated:!1,userId:null,formIsValid:!1,formControls:{email:{value:"",placeholder:"Email",valid:!1,touched:!1,validationRules:{isEmail:!0}},password:{value:"",placeholder:"Password",valid:!1,touched:!1,validationRules:{isPassword:!0}}}},e}return Object(u.a)(a,[{key:"render",value:function(){if(this.state.isAuthenticated){var e=(this.props.history.location.state.from||"/home").pathname;return o.a.createElement(i.a,{to:{pathname:e}})}return o.a.createElement("div",{className:"Container",style:{width:"120vw",height:"120vh",position:"fixed",top:"-20vh",left:"-10vw",zIndex:-1}},o.a.createElement("div",{className:"logcard"},o.a.createElement("h1",null,"Login"),o.a.createElement("form",{onSubmit:this.formSubmitHandler},o.a.createElement(f,{name:"email",type:"email",placeholder:this.state.formControls.email.placeholder,value:this.state.formControls.email.value,onChange:this.changeHandler,touched:this.state.formControls.email.touched,valid:this.state.formControls.email.value}),o.a.createElement(f,{name:"password",type:"password",placeholder:this.state.formControls.password.placeholder,value:this.state.formControls.password.value,onChange:this.changeHandler,touched:this.state.formControls.password.touched,valid:this.state.formControls.password.value}),o.a.createElement("input",{type:"submit",name:"login",disabled:!this.state.formIsValid})),o.a.createElement("div",null,o.a.createElement("p",null,"Not a member?",o.a.createElement(s.b,{className:"nav-link",exact:!0,to:"/signup"},"signup")))))}}]),a}(o.a.Component),y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).changeHandler=function(t){var a=t.target.name,n=t.target.value,o=Object(c.a)({},e.state.formControls),r=Object(c.a)({},o[a]);r.value=n,r.touched=!0,r.valid=w(n,r.validationRules),o[a]=r;var l=!0;for(var s in o)l=o[s].valid&&l;e.setState({formControls:o,formIsValid:l})},e.formSubmitHandler=function(t){t.preventDefault();var a={};for(var n in e.state.formControls)a[n]=e.state.formControls[n].value},e.state={userId:null,formIsValid:!1,formControls:{first_name:{value:"",placeholder:"First Name",valid:!1,touched:!1,validationRules:{minLength:3,isRequired:!0}},last_name:{value:"",placeholder:"Last Name",valid:!1,touched:!1,validationRules:{minLength:3,isRequired:!0}},email:{value:"",placeholder:"Email",valid:!1,touched:!1,validationRules:{isEmail:!0}},password:{value:"",placeholder:"Password",valid:!1,touched:!1,validationRules:{isPassword:!0}}}},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"Container",style:{width:"120vw",height:"120vh",position:"fixed",top:"-10vh",left:"-10vw",zIndex:-1}},o.a.createElement("div",{className:"logcard signupl"},o.a.createElement("h1",null,"Sign up"),o.a.createElement("form",{onSubmit:this.formSubmitHandler},o.a.createElement(f,{name:"first_name",type:"text",placeholder:this.state.formControls.first_name.placeholder,value:this.state.formControls.first_name.value,onChange:this.changeHandler,touched:this.state.formControls.first_name.touched,valid:this.state.formControls.first_name.value}),o.a.createElement(f,{name:"last_name",type:"text",placeholder:this.state.formControls.last_name.placeholder,value:this.state.formControls.last_name.value,onChange:this.changeHandler,touched:this.state.formControls.last_name.touched,valid:this.state.formControls.last_name.value}),o.a.createElement(f,{name:"email",type:"email",placeholder:this.state.formControls.email.placeholder,value:this.state.formControls.email.value,onChange:this.changeHandler,touched:this.state.formControls.email.touched,valid:this.state.formControls.email.value}),o.a.createElement(f,{name:"password",type:"password",placeholder:this.state.formControls.password.placeholder,value:this.state.formControls.password.value,onChange:this.changeHandler,touched:this.state.formControls.password.touched,valid:this.state.formControls.password.value}),o.a.createElement("input",{type:"submit",name:"login",disabled:!this.state.formIsValid})),o.a.createElement("div",null,o.a.createElement("p",null,"Already a member?",o.a.createElement(s.b,{className:"nav-link",exact:!0,to:"/login"},"login")))))}}]),a}(o.a.Component);o.a.Component;var j=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,null,o.a.createElement("div",{className:"container-fluid text-center"},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/login",component:b}),o.a.createElement(i.b,{path:"/",component:y}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.ca015f8d.chunk.js.map